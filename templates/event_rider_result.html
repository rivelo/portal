<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="description" content="Результати марафону <a href="{% url 'event-show' event.pk  %}">
<meta name="keywords" content="{{event.name}}, МТБ марафон, Веломарафон, Велосипедний марафон, Вело, Рівело, Rivelo, Рівне, XCM, Marathon MTB, Start list">
<meta name="author" content="Rivelo">

<title>Результати марафону {{event.name}}</title>

<link href="/media/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css"/>
<script src="/media/jquery.dataTables.min.js"></script>
<script src="/media/jquery.jeditable.mini.js" type="text/javascript" charset="utf-8"></script>

<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

{% load poll_extras %}

<style>
/* Style The Dropdown Button */
.dropbtn {
    background-color: #4CAF50;
    color: white;
    padding: 16px;
    font-size: 16px;
    border: none;
    cursor: pointer;
}

/* The container <div> - needed to position the dropdown content */
.dropdown {
    position: relative;
    display: inline-block;
}

/* Dropdown Content (Hidden by Default) */
.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
}

/* Links inside the dropdown */
.dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}

/* Change color of dropdown links on hover */
.dropdown-content a:hover {background-color: #f1f1f1}

/* Show the dropdown menu on hover */
.dropdown:hover .dropdown-content {
    display: block;
}

/* Change the background color of the dropdown button when the dropdown content is shown */
.dropdown:hover .dropbtn {
    background-color: #3e8e41;
}

/*tfoot {
    display: table-header-group;
}
*/
tfoot input {
        width: 100%;
        padding: 3px;
        box-sizing: border-box;
    }
    
/*#event_stat:hover {
background-color: yellow;
cursor: pointer;
}*/

{% comment %}
.cat_showhide:hover {
background-color: yellow;
cursor: pointer;
}
{% endcomment %}

.hover-content {
    display:none;
}
 
.pay_type:hover .hover-content {
    display:block;
}

.category:hover .hover-content {
    display:block;
} 

</style>


<script>
$(document).ready(function(){
	$("#dialog_start").hide();	

	$( "#tabs" ).tabs();
	$( "#tabs" ).hide()

	$( "#event_stat" ).click(function() {
//  		$( "#tabs" ).show()
  		if ($("#event_stat").html() == "Cтатистика") {
    		$("#event_stat").html("Приховати статистику");
    	}
    	else {
    		$("#event_stat").html("Cтатистика");
    	}
    	$( "#tabs" ).toggle()
	});

	$(".cat_showhide").click(function() {
		if ($(this).text().search( 'Показати' ) != -1) {
			$(this).html($(this).html().replace('Показати', 'Приховати'))
		}
		else {
			$(this).html($(this).html().replace('Приховати', 'Показати'))
		}
//		console.log($(this).attr("id"));
		var cat = $(this).attr("id").split("event_")[1]
		$("#table_"+cat+"_wrapper").toggle();		
	})	
	
	
	$('#rtable tfoot th').each( function () {
        var title = $(this).text();
        $(this).html( '<input type="text" placeholder="Search '+title+'" />' );
    } );


    jQuery.fn.dataTableExt.oSort["duration-desc"] = function (x, y) {
        function getMins(str){
        	if (str == "DNF") {str = "999:00:00"}
        	if (str == "DNS") {str = "9999:00:00"}
        	if (str == "") {str = "9999:00:00"}
            var arr = str.split(':');
            return 60*60 * parseInt(arr[0], 10)+ 60 * parseInt(arr[1], 10)+ parseInt(arr[2], 10);
        };
        return getMins(x) - getMins(y);
    };
    
    jQuery.fn.dataTableExt.oSort["duration-asc"] = function (x, y) {
        return jQuery.fn.dataTableExt.oSort["duration-desc"](y, x);
    }
    
	
	// all rider list
    var rtable = $('#rtable').DataTable({
    	"lengthMenu": [[25, 50, 100, -1], [25, 50, 100, "All"]],
		"columnDefs": [
//        	{ "type": "uk_time", targets: 12 }
        	{ "type": "duration", targets: 14 },
        	{ "type": "duration", targets: 10 },
    	],
    	
    });
	
    rtable.columns().every( function () {
        var that = this;
 
        $( 'input', this.footer() ).on( 'keyup change', function () {
            if ( that.search() !== this.value ) {
                that
                    .search( this.value )
                    .draw();
            }
        } );
    } );
    
//  rtable.column(12).visible(false); // Загальний час
	rtable.column(0).visible(false);
    rtable.column(8).visible(false);
    rtable.column(9).visible(false);
//    rtable.column(8).visible(true);
	rtable.column(12).visible(false); //час до кп1
	rtable.column(-1).visible(false);
	rtable.column(-2).visible(false); //Примітки або Стать
	
{% if user.is_authenticated %}
	rtable.column(-4).visible(false);
	rtable.column(-3).visible(false);
	rtable.column(-5).visible(false);
	rtable.column(-6).visible(false);
	rtable.column(-3).visible(false);
	rtable.column(-7).visible(false);
	//rtable.column(-7).visible(true); //Стать
{% endif %}
	
{% comment %}		
{% endcomment %}

	$('#rtable_length_panel').append('<div class="cdiv" style="float:right; padding-left:10px;"><span id="sex_rider" val="2"><img id="rman" src="/media/images/male-icon_35.png" height="20" alt="Чоловіки" title="Чоловіки"></img><img id="rwom" src="/media/images/female-icon_35.png" height="20" alt="Жінки" title="Жінки"></span></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="6">Команда</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="5">Місто</a></div>');	
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="7">Рік</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="3">Нік</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="8">Велосипед</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="9">Дистанція</a></div>');	
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="10">Старт</a></div>');
	
{% if user.is_authenticated and user|has_group:"moder" %}
	{#	rtable.column(-8).visible(false); #}
	rtable.column(5).visible(false); 

	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="-9">Фініш</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="-8">Загальний час</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="13">КП2</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="12">Час КП1</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="11">КП1</a></div>');
	
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="-1">Підтвердження оплати</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="-2">Примітки</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="-3">Телефон</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="-4">Дія</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="-5">Оплата</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="-6">Статус</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="-7">Стать</a></div>');
	$('#rtable_length_panel').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="0">Id</a></div>');
{% endif %}	
	
	

    $('a.toggle-vis').on( 'click', function (e) {
        e.preventDefault();
         // Get the column API object
        var column = rtable.column( $(this).attr('data-column') );
         // Toggle the visibility
        column.visible( ! column.visible() );
    } );

var tcat0 = $('#table_cat0').DataTable({
	"columnDefs": [
    	{ "type": "duration", targets: 7 }
	],
	"lengthMenu": [[15, 50, 100, -1], [15, 50, 100, "All"]]
	 	});
	
var tcat1 = $('#table_cat1').DataTable({
		"columnDefs": [
        	{ "type": "duration", targets: 7 },
        	{ "type": "num", targets: 4 }
    	],
	    	"lengthMenu": [[15, 50, 100, -1], [15, 50, 100, "All"]]
	    });


//	$('#table_cat1_length').append('<div class="cdiv btn btn-outline-dark" style="float:right; padding-left:10px;"><a class="toggle-vis" data-column="8">Стать</a></div>');	
	
    
 $("body").on('click', '#sex_rider', function() {
	var status = $('#sex_rider').attr('val')
//	rtable.column(-7).visible(true);
	if ( status == 2) {
		$('#sex_rider').attr('val', 1);
		$('#rwom').hide()
		$('#rman').show();
		tcat0.columns( 8 ).search( '1' ).draw();
		tcat1.columns( 8 ).search( '1' ).draw();
		tcat2.columns( 8 ).search( '1' ).draw();
		tcat3.columns( 8 ).search( '1' ).draw();
		tcat4.columns( 8 ).search( '1' ).draw();
		tcat5.columns( 8 ).search( '1' ).draw();
{% if user.is_authenticated and user|has_group:"moder" %}	
		rtable.columns( -7 ).search( '1' ).draw();
{% else %}
		rtable.column(-2).search( '1' ).draw();
{% endif %}
// 		rtable.draw();
 		console.log('status = ' + status);
	}
	if ( status == 1) {
		$('#sex_rider').attr('val', 0);
		$('#rwom').show();
		$('#rman').hide()
		$.fn.dataTableExt.afnFiltering.pop();
{% if user.is_authenticated and user|has_group:"moder" %}		
		rtable.columns( -7 ).search( '0' ).draw();
{% else %}		
		rtable.column(-2).search( '0' ).draw();
{% endif %}		
 		tcat1.columns( 8 ).search( '0' ).draw();
 		tcat0.columns( 8 ).search( '0' ).draw();
		tcat2.columns( 8 ).search( '0' ).draw();
		tcat3.columns( 8 ).search( '0' ).draw();
		tcat4.columns( 8 ).search( '0' ).draw();
		tcat5.columns( 8 ).search( '0' ).draw();
 		console.log('status = ' + status)
// 		tcat1.columns( 8 ).search(0).draw();
	}
	if ( status == 0) {
		$('#sex_rider').attr('val', 2);
		$('#rwom').show();
		$('#rman').show();
{% if user.is_authenticated and user|has_group:"moder" %}		
		rtable.columns( -7 ).search( '' ).draw();
{% else %}		
		rtable.column(-2).search( '' ).draw();
{% endif %}		
		$.fn.dataTableExt.afnFiltering.pop();				
 		console.log('status = ' + status)
 		tcat0.columns( 8 ).search( '' ).draw();
 		tcat1.columns( 8 ).search( '' ).draw();
		tcat2.columns( 8 ).search( '' ).draw();
		tcat3.columns( 8 ).search( '' ).draw();
		tcat4.columns( 8 ).search( '' ).draw();
		tcat5.columns( 8 ).search( '' ).draw();
	}
	
 });    


	    var tcat2 = $('#table_cat2').DataTable({
			"columnDefs": [
	        	{ "type": "duration", targets: 7 }
	    	],
	    	"lengthMenu": [[15, 50, 100, -1], [15, 50, 100, "All"]]
	    });

	    var tcat3 = $('#table_cat3').DataTable({
			"columnDefs": [
	        	{ "type": "duration", targets: 7 }
	    	],
	    	"lengthMenu": [[15, 50, 100, -1], [15, 50, 100, "All"]]
	    });

	    var tcat4 = $('#table_cat4').DataTable({
			"columnDefs": [
	        	{ "type": "duration", targets: 7 }
	    	],
	    	"lengthMenu": [[15, 50, 100, -1], [15, 50, 100, "All"]]
	    });

	    var tcat5 = $('#table_cat5').DataTable({
			"columnDefs": [
	        	{ "type": "duration", targets: 7 }
	    	],
	    	"lengthMenu": [[15, 50, 100, -1], [15, 50, 100, "All"]]
	    });

	    var tcat6 = $('#table_cat6').DataTable({
			"columnDefs": [
	        	{ "type": "duration", targets: 7 }
	    	],
	    	"lengthMenu": [[15, 50, 100, -1], [15, 50, 100, "All"]]
	    });

	    
	{% if user.is_authenticated and user|has_group:"moder" %}
		tcat0.column(8).visible(true);
		tcat1.column(8).visible(true);
		tcat2.column(8).visible(true);
		tcat3.column(8).visible(true);
		tcat4.column(8).visible(true);
		tcat5.column(8).visible(true);
		tcat6.column(8).visible(true);
	{% else %}
		tcat0.column(8).visible(false);
		tcat1.column(8).visible(false);
		tcat2.column(8).visible(false);
		tcat3.column(8).visible(false);
		tcat4.column(8).visible(false);
		tcat5.column(8).visible(false);
		tcat6.column(8).visible(false);
	{% endif %}
	    
//		tcat2.column(7).visible(false); // Загальний час	    
	    
$("body").on("click",".finish_add",function(e){ 	
    $(this).editable('/rider/result/add/', {
    	id: 'point', 
    	loadtype: 'POST',
         submit : 'OK',
         tooltip   : 'Click to add time',
         style   : 'inherit',
         event : "click",
         submitdata : function() {
          	return {rid : $(this).attr('rid'), point: 'finish'};
          	//return { rid: $.trim($(this).attr('rid')),  point: 'finish' };
         },
        }).trigger("focus"); 
});   
    
 
$("body").on("click",".kp1_add",function(e){ 	
	$(this).editable('/rider/result/add/', { 
	 id: 'point',
	 
	 loadtype: 'POST',
     submit : 'OK',
     tooltip   : 'Click to add time',
     style   : 'inherit',
     event : "click",
     submitdata : function() {
      	return {rid : $(this).attr('rid'), point: 'kp1'};
    	 },
    }).trigger("focus"); 
});   


$("body").on("click",".start_edit",function(e){ 	
	$(this).editable('/rider/result/add/', { 
	 id: 'point',
	 
	 loadtype: 'POST',
     submit : 'OK',
     tooltip   : 'Click to add time',
     style   : 'inherit',
     event : "click",
     submitdata : function() {
      	return {rid : $(this).attr('rid'), point: 'start'};
    	 },
    }).trigger("focus"); 
});   


$("body").on("click",".start_status",function(e){ 	
	$(this).editable('/rider/startstatus/', {
     data   : "{'True':'True','False':'False'}",
     loadtype: 'POST',
     type   : 'select',
     submit : 'OK',
     tooltip   : 'Click to edit...',
     style   : 'inherit',
     event : "dblclick",
     submitdata : function() {
      	return {rid : $(this).attr('rider_id')};
    	 },
     callback : function(value, settings) {
         var obj = jQuery.parseJSON(value);
         console.log(obj);
         str = '[' + obj['status'] + "]";
         $(this).html(str);
     }
    }).trigger("focus"); 
});   


$("body").on("click", ".number_edit", function(e){
    $(this).editable('/event/{{event.id}}/registration/edit/number/', {
 		id   : 'rid',
        name : 'number',
        event : 'dblclick',
        submitdata : function() {
     	 	return {rid : $(this).attr('rid'),
     	 			};
   	 	},
        indicator : 'Saving...',
        tooltip   : 'Click to edit...',
        select : true,
        style  : "inherit",
        callback : function(value, settings) {
        $(this).html(value);
    	}
    });
 });


$( "#img_start" ).click(function() {
	$( "#dialog_start" ).dialog({
	resizable: false,
  	modal: true,
	width: 380,
	height:"auto",
	buttons: {
"Додати": function() {
//	$(".ok_button").on('click', function(){
		$.ajax({
        type: "POST",
        url: "/rider/start/edit/",
        data: {event:  {{ event.pk }}, value: $("#dsedit").val() },
        //dataType: "json",
        success:function(data){
        	$("#img_start").css("opacity", 1);
       		$("#dialog_start").append("<h2>Час старту додано!</h2>");
        	//console.log("Час змінено " + data);
        },
        error:function(data){
            //alert("++++ При отправке возникли проблемы" + data);
            $("#dialog_start").append("<h2 color='red'>При відправці виникла помилка</h2>");
        }
    	});
//    console.log("Натиснуто ОК" + $("#msg_text").val()); 
   // })
},
"Відмінити": function() {
	$( this ).dialog( "close" );	
	$("#dialog_start h2").remove();
},

}  		
	});
});



$( "#clear_kp1_result" ).click(function() {
	$( "#dialog_clear" ).dialog({
		resizable: false,
	  	modal: true,
		width: 380,
		height:"auto",
  	buttons: {
    "Очистити": function() {
			$.ajax({
            type: "POST",
            url: "/event/result/clear/",
            data: {event:  {{ event.pk }}, point: 'kp1' },
            success:function(data){
            	console.log("Час змінено " + data);
            },
            error:function(data){
                alert("++++ При отправке возникли проблемы" + data);
            }
        	});
        console.log("Натиснуто ОК" + $("#msg_text").val());
        $( this ).dialog( "close" );
    },
    "Відмінити": function() {
    	$( this ).dialog( "close" );	
    },
    }  		
	});
});
   

$( "#clear_kp2_result" ).click(function() {
	$( "#dialog_clear" ).dialog({
		resizable: false,
	  	modal: true,
		width: 380,
		height:"auto",
  	buttons: {
    "Очистити": function() {
			$.ajax({
            type: "POST",
            url: "/event/result/clear/",
            data: {event:  {{ event.pk }}, point: 'kp2' },
            success:function(data){
            	console.log("Час змінено " + data);
            },
            error:function(data){
                alert("++++ При отправке возникли проблемы" + data);
            }
        	});
        console.log("Натиснуто ОК" + $("#msg_text").val());
        $( this ).dialog( "close" );
    },
    "Відмінити": function() {
    	$( this ).dialog( "close" );	
    },
    }  		
	});
});


$( "#clear_finish_result" ).click(function() {
	$( "#dialog_clear" ).dialog({
		resizable: false,
	  	modal: true,
		width: 380,
		height:"auto",
  	buttons: {
    "Очистити": function() {
			$.ajax({
            type: "POST",
            url: "/event/result/clear/",
            data: {event:  {{ event.pk }}, point: 'finish' },
            success:function(data){
            	console.log("Час змінено " + data);
            },
            error:function(data){
                alert("++++ При отправке возникли проблемы" + data);
            }
        	});
        console.log("Натиснуто ОК" + $("#msg_text").val());
        $( this ).dialog( "close" );
    },
    "Відмінити": function() {
    	$( this ).dialog( "close" );	
    },
    }  		
	});
});


$("#normalize_date_result").click(function() {
	$( "#dialog_date_normalize" ).dialog({
		resizable: false,
	  	modal: true,
		width: 380,
		height:"auto",
  	buttons: {
    "Змінити": function() {
			$.ajax({
            type: "POST",
            url: "/event/result/normalize/",
            data: {event:  {{ event.pk }}, date: '26.05.2019' },
            success:function(data){
            	console.log("Записи відредаговано " + data);
            },
            error:function(data){
                alert("++++ При отправке возникли проблемы" + data);
            }
        	});
        console.log("Натиснуто ОК" + $("#msg_text").val());
        $( this ).dialog( "close" );
    },
    "Відмінити": function() {
    	$( this ).dialog( "close" );	
    },
    }  		
	});
});



$( "#clear_result" ).click(function() {
	$( "#dialog_clear" ).dialog({
		resizable: false,
	  	modal: true,
		width: 380,
		height:"auto",
  	buttons: {
    "Очистити": function() {
			$.ajax({
            type: "POST",
            url: "/event/result/clear/",
            data: {event:  {{ event.pk }}, point: 'result' },
            success:function(data){
            	console.log("Записи видалено " + data);
            },
            error:function(data){
                alert("++++ При отправке возникли проблемы" + data);
            }
        	});
        console.log("Натиснуто ОК" + $("#msg_text").val());
        $( this ).dialog( "close" );
    },
    "Відмінити": function() {
    	$( this ).dialog( "close" );	
    },
    }  		
	});
});


{% comment %}
{% endcomment %}

$("#table_cat0_wrapper").hide();
$("#table_cat1_wrapper").hide();    
$("#table_cat2_wrapper").hide();
$("#table_cat3_wrapper").hide();
$("#table_cat4_wrapper").hide();
$("#table_cat5_wrapper").hide();
$("#table_cat6_wrapper").hide();

});



</script>



    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Тип велосипеду', 'Кількість'],
{% with the_bikes=list.0.reg_event.event.pk|res_stat_bikes %}            
{% for bike in the_bikes %}
  		['{{bike.reg_event__bike_type__name}}',  {{bike.num_bike}}],
{% endfor %}
{% endwith %}  		
        ]);

    
        var options = {
                title: 'Типи велосипедів учасників',
                legend: {position: 'labeled', textStyle: {color: 'blue', fontSize: 14}, maxLines: 12, labeledValueText: 'both',}, //'none',
                pieSliceText: 'percentage',
                slices: {  4: {offset: 0.2},
                          2: {offset: 0.1},
                          8: {offset: 0.1},
                          3: {offset: 0.1},
                },
                pieStartAngle: 20,
                chartArea:{left:0,top:20,width:'2000',height:'2500'},
                width: '920',
                height: '500',
                is3D: 'True',
                tooltip: { isHtml: true },
                //legend: { position: 'labeled' },
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart_3d'));
        chart.draw(data, options);
      }

      google.charts.setOnLoadCallback(drawChart_city);      
      function drawChart_city() {
          var data = google.visualization.arrayToDataTable([
            ['Місто', 'Кількість'],
  {% with the_citys=list.0.reg_event.event.pk|res_stat_city %}            
  {% for city in the_citys %}
    		['{{city.reg_event__city}}',  {{city.num_city}}],
  {% endfor %}
  {% endwith %}    		
          ]);

          var options = {
                  title: 'Міста учасників',
                  //pieHole: 0.5,
                  pieSliceText: 'both',
                  pieStartAngle: 140,
                  legend: {position: 'labeled', textStyle: {color: 'blue', fontSize: 14}, maxLines: 12, labeledValueText: 'both',}, //'none', position: 'labeled'
                  chartArea:{left:0,top:20,width:'2000',height:'2500'},
                  width: '920',
                  height: '500',
                  //is3D: 'True',
                  tooltip: { isHtml: true },
                  //legend: { position: 'labeled' },
          };

          var chart = new google.visualization.PieChart(document.getElementById('piechart_3d_city'));
          chart.draw(data, options);
         
        }

      
      google.charts.setOnLoadCallback(drawChart_sex);      
      function drawChart_sex() {
          var data = google.visualization.arrayToDataTable([
            ['Стать', 'Кількість'],
            ['Жінок ({{ list.0.reg_event.event.pk|res_statistic:"0" }})',  {{ list.0.reg_event.event.pk|res_statistic:"0" }} ],
    		['Чоловіків ({{ list.0.reg_event.event.pk|res_statistic:"1" }})',  {{ list.0.reg_event.event.pk|res_statistic:"1" }}],            
          ]);

          var options = {
                  title: '',
                  //pieHole: 0.5,
                  pieSliceText: 'both',
                  slices: {  1: {offset: 0.05},
			            },
//                  pieStartAngle: 140,
                  legend: {position: 'left', textStyle: {color: 'blue', fontSize: 14}, maxLines: 12, labeledValueText: 'both',}, //'none', position: 'labeled'
                  chartArea:{left:0,top:20,width:'2000',height:'2500'},
                  width: '650',
                  height: '500',
                  is3D: 'True',
                  tooltip: { isHtml: true },
                  //legend: { position: 'labeled' },
          };

          var chart = new google.visualization.PieChart(document.getElementById('piechart_3d_sex'));
          chart.draw(data, options);
         
        }
      
    	
    </script>


{% block content %}


<!-- dialog for client message -->
<div id="dialog_start" title="Старт заходу">
<input type="text" id="dsedit" name="mytext[]" cols="40"> </input>
</div>
	
<div id="dialog_clear" title="Очистити результати">
</div>

<div id="dialog_date_normalize" title="Очистити результати">
</div>


<div class="row d-flex">
<div class="col-12">
<h2 class="title"> Результати марафону <a href="{% url 'event-show' event.pk  %}">{{event.name}}</a></h2>
</div>
</div>

<div class="row d-flex">
<div class="col-11">
{% if dist_name %} 
<h2 class="title"> <span class="badge badge-info">{{dist_name}}</span> </h2>
{% endif %} 
<div class="row mb-1">
{% if user.is_authenticated %}
{% if user|has_group:"admin"%}
{{request.user}}

<a type="button" class="btn btn-warning" href="{% url 'event-result-light-admin' id=event.pk  point='kp1' %}">Проста версія КП1</a>  
<a type="button" class="btn btn-warning" href="{% url 'event-result-light-admin' id=event.pk point='kp2' %}">Проста версія КП2</a>  
<a type="button" class="btn btn-warning" href="{% url 'event-result-light-admin' id=event.pk point='kp3' %}">Проста версія КП3</a>  
<a type="button" class="btn btn-warning" href="{% url 'event-result-light-admin' id=event.pk point='finish' %}">Проста версія Finish</a> <br><br>

{% else %}
<a class="btn btn-success btn-md" href="{% url 'event-result-light' event.pk %}">Проста версія</a> <br><a href="{% url 'event-show' event.pk %}">{{event.name}}</a>
{% endif %} 
{% endif %}
</div>
 
<div class="row mb-1">
{% if user|has_group:"admin"%}
<button type="button" class="btn btn-light" id="clear_result"  style=" background:#e4e7ea;" > Очистити дані</button>
<button type="button" class="btn btn-light" id="clear_kp1_result"  style=" background:#e4e7ea;" > Очистити дані з КП1</button>
<button type="button" class="btn btn-light" id="clear_kp2_result"  style=" background:#e4e7ea;" > Очистити дані з КП2</button>
<button type="button" class="btn btn-light" id="clear_kp3_result"  style=" background:#e4e7ea;" > Очистити дані з КП3</button>
<button type="button" class="btn btn-light" id="clear_finish_result"  style=" background:#e4e7ea;" > Очистити фінішні дані</button>
<button type="button" class="btn btn-dark" id="normalize_date_result" >Змінити дату результатів</button>
{% endif %}
</div>

</div>

<div class="col-1 mb-1">
<div style="float:right;">
	{% if event.icon %}
{% if user.is_authenticated and user|has_group:"admin" %}	
	<img id="img_start" src="/media/{{event.icon}}" style="max-width: 150px;"/>
{% endif %}	
	{% endif %} 
</div>
</div>



</div>


<div class="row">
<div class="col-12" id="rtable_length_panel">

</div>

<div class="col-12">
<table id="rtable" class="display table-responsive" cellspacing="0" width="100%">
<thead>
<tr>
<th title="Id учасника">id</th>
<th title="Стартовий номер">№</th>
<th>Ім'я / Прізвище</th>
<th>Нік</th>
<th title="Стать">С</th>
<th>Місто</th>
<th>Команда</th>
<th title="Вікова категорія">Вік</th>
<th>Велосипед</th>
<th>Дистанція</th>
<th title="Старт">Старт</th>
<th title="КП1">КП1</th>
<th title="КП1">Час до КП1</th> 
{% if kp2 %}
<th title="КП2">КП2</th>
{% endif %}
{% if kp3 %}
<th title="КП3">КП3</th>
{% endif %}
<th title="Фініш">Фініш</th>
<th title="Загальний час">Загальний час</th>
<th>Стать</th>
<th>Статус</th>
{% if user.is_authenticated %}
<th>Оплата</th>
<th>Дія</th>
<th>Телефон</th>
<th>Примітки</th>
<th>Відмітка</th>
{% endif %}
</tr>
</thead>
	<tfoot>
            <tr>
<th title="Id учасника">id</th>            
<th title="Стартовий номер">№</th>
<th>Ім'я / Прізвище</th>
<th>Нік</th>
<th title="Стать">С</th>
<th>Місто</th>
<th>Команда</th>
<th>Рік нар.</th>
<th>Велосипед</th>
<th>Дистанція</th>
<th title="Старт">Старт</th>
<th title="КП1">КП1</th>
<th title="КП1">Час до КП1</th>
{% if kp2 %}
<th title="КП2">КП2</th>
{% endif %}
{% if kp3 %}
<th title="КП3">КП3</th>
{% endif %}
<th title="Фінішний час">Фініш</th>
<th title="Загальний час">Загальний час</th>
<th>Стать</th>
<th>Статус</th>
{% if user.is_authenticated %}
<th>Оплата</th>
<th>Дія</th>
<th>Телефон</th>
<th>Примітки</th>
<th>Відмітка</th>
{% endif %}            
            </tr>
        </tfoot>
<tbody>
{% for rider in list %}

{% if user.is_authenticated %}
  
{% if rider.reg_event.status == True and rider.reg_event.pay > 0 %}
<tr style="color: green; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay > 0 %}
<tr style="color: black; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay == 0 %}
<tr style="color: grey">
{% endif %}

{% endif %}

<td>
{{rider.reg_event.id}}
</td>
<td>
{{rider.reg_event.start_number}}
</td>
<td>{{rider.reg_event.fname}} {{rider.reg_event.lname}} 
{% for star in rider.reg_event.mile100plus %}
	<i class="material-icons" title="Участь в марафоні">stars</i>
{% endfor %}
</td>
<td>{{rider.reg_event.nickname}}</td>
<td align="center" data-order="{{rider.reg_event.sex}}">
{% if rider.reg_event.sex == 1 %}
	<img src="/media/images/male-icon_35.png" height="20" alt="Чоловік" title="Чоловік"></img>
{% else %}
	<img src="/media/images/female-icon_35.png" height="20" alt="Жінка" title="Жінка"></img>
{% endif %}
</td>
<td>{{rider.reg_event.city}}</td>
<td>{{rider.reg_event.club}}</td>

<td align="center" class="category"
{% if rider.reg_event.category.0 == 1 %} 
{% if rider.reg_event.sex == 1 %}
	style="background-color: yellow;"
{% else %}
	style="background-color: pink;"
{% endif %}
{% endif %}
{% if rider.reg_event.category.0 == 2 %} 
{% if rider.reg_event.sex == 1 %}
style="background-color: blue;"
{% else %}
	style="background-color: purple;"
{% endif %}
{% endif %}
{% if rider.reg_event.category.0 == 3 %} 
style="background-color: green;"
{% endif %}
{% if rider.reg_event.category.0 == 4 %} 
style="background-color: red;"
{% endif %}
{% if rider.reg_event.category.0 == 5 %} 
style="background-color: white;"
{% endif %}

>
<!-- {{rider.reg_event.birthday|date:"Y"}}  --> 
{{rider.reg_event.category.0}} <div class="hover-content">{{rider.reg_event.category.1}}</div> </td>


<td align="center">{{rider.reg_event.bike_type.name}}</td>
<td align="center">{{rider.reg_event.distance_type}}</td>
<td align="center" class="start_edit" rid="{{rider.reg_event.id}}"> {{rider.start|date:'H:i:s'}} </td>
<td align="center" class="kp1_add" rid="{{rider.reg_event.id}}"> {{rider.kp1|date:'H:i:s'}} </td>
<td>{{rider.get_time_diff_kp1}}</td> 
{% if kp2 %}
<td align="center" class="kp1_add" rid="{{rider.reg_event.id}}"> {{rider.kp2|date:'H:i:s'}} </td>
{% endif %}
{% if kp3 %}
<td align="center" class="kp1_add" rid="{{rider.reg_event.id}}"> {{rider.kp3|date:'H:i:s'}} </td>
{% endif %}
{% if rider.start == rider.finish %}
	{% if rider.start == None %}
	<td align="center" class="finish_add" rid="{{rider.reg_event.id}}"> DNS </td>
	{% else %}
	<td align="center" class="finish_add" rid="{{rider.reg_event.id}}"> DNF </td>
	{% endif %}
{% else %}
<td align="center" class="finish_add" rid="{{rider.reg_event.id}}"> {{rider.finish|date:'H:i:s'}} </td>
{% endif %}

<td align="center" class="result" rid="{{rider.reg_event.id}}"> {{rider.get_time_diff}} </td>
<td align="center">{{rider.reg_event.sex}}</td>
{% if user.is_authenticated %}
	<td align="center" class="reg_status" rider_id="{{rider.pk}}">{{rider.reg_event.status}}</td>
	<td align="center" class="pay_type" rider_id="{{rider.pk}}">{{rider.reg_event.pay_type}}<div class="hover-content">{{rider.reg_event.pay_date}}</div></td>
{% else %}
	<td align="center">{{rider.reg_event.status}}</td>
{% endif %}
{% if user.is_authenticated %}
	<td align="center" >
<div class="dropdown">
  <span>
<a href="{% url 'rider-pay-submit-admin' rider.reg_event.pk %}"><img src="/media/images/menu_navigation_40.png" height="25"></a>
  </span>
  <div class="dropdown-content">
	<a href="{% url 'rider-reminder-mail' rider.reg_event.pk %}">Відправити лист</a>
  </div>
</div>
	</td>
	<td>
	{{rider.reg_event.phone}}
	</td>
	<td>
	{{rider.reg_event.description}}
	</td>
	<td class="start_status" rider_id="{{rider.reg_event.pk}}">
	{{rider.reg_event.start_status}}
	</td>

	
{% endif %}
</tr>
{% endfor %}
</tbody>  
</table>	

</div>
</div>

<h3 style="font-size:18px; font-weight:bold; color: black; width: 100%" title="Показати статистику" id="event_stat" type="button" class="btn btn-info">Cтатистика</h3>


<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Стать</a></li>
    <li><a href="#tabs-2">Місто</a></li>
    <li><a href="#tabs-3">Велосипед</a></li>
    <li><a href="#tabs-4">Інше</a></li>
  </ul>
  <div id="tabs-1" style="width: 600px; height: 520px;">
    <div id="piechart_3d_sex" style="width: 100%; height: 100%;">	</div>
  </div>
  <div id="tabs-2" style="width: 100%; height: 500px;">

{% comment %}
	<p>CITY: 
	{% with the_citys=list.0.reg_event.event.pk|res_stat_city %} 
{#	{{list.0.reg_event.event.pk|res_stat_city}}<br> #}
	{% for city in the_citys %}
    		{{city.reg_event__city}} - {{city.num_city}}<br>
  	{% endfor %}
  	{% endwith %}
  	</p>
{% endcomment %}
  	
	<div id="piechart_3d_city" style="width: 100%; height: 100%;">	</div>
  </div>
  <div id="tabs-3" style="width: 100%; height: 500px;">
	<div id="piechart_3d" style="width: 100%; height: 100%;">	</div>
{% comment %}
    {% for bike in list.group_bike %}
		{{bike.reg_event__bike_type__name}} - {{bike.num_bike}}<br>
	{% endfor %}
    
	{% for bike in event.riders_bike %}
		{{bike.bike_type__name}} - {{bike.num_bike}}<br>
	{% endfor %}
{% endcomment %}	
    
  </div>
  <div id="tabs-4">
    <p>
    Оплачених - {{ event.riders_pay_count }}
	<br>    
    {% if user.is_authenticated %}
    Сума - {{ event.riders_pay_sum }}
    {% endif %}
    </p>
  </div>
  
</div>



{# Категорії учасників #}

{% if uat %}

<br>
<h2>
<button type="button" style="background-color: yellow; width:100%" id="event_cat1" class="cat_showhide">
  Категорія 19-29 років <<Показати>> <span class="badge badge-light">{{ cat1.count }} учасників</span>
</button>
</h2>
  
<table id="table_cat1" class="display" cellspacing="0" width="100%">
<thead>
<tr>
<th>№</th>
<th>Імя / Прізвище</th>
<th>Нік</th>
<th title="Стать">C</th>
<th>Місто</th>
<th>Команда</th>
<th>Рік народження</th>
<th>Загальний час</th>
<th>Стать</th>
</tr>
</thead>
<tbody>
{% for rider in cat1 %}
{% if rider.reg_event.status == True and rider.reg_event.pay > 0 %}
<tr style="color: green; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay > 0 %}
<tr style="color: black; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay == 0 %}
<tr style="color: grey">
{% endif %}
<td>{{forloop.counter}}</td>
<td>{{rider.reg_event.fname}} {{rider.reg_event.lname}}</td>
<td>{{rider.reg_event.nickname}}</td>
<td align="center">
{% if rider.reg_event.sex == 1 %}
	<img src="/media/images/male-icon_35.png" height="20" alt="Чоловік" title="Чоловік"></img>
{% else %}
	<img src="/media/images/female-icon_35.png" height="20" alt="Жінка" title="Жінка"></img>
{% endif %}
</td>
<td>{{rider.reg_event.city}}</td>
<td>{{rider.reg_event.club}}</td>
<td align="center">{{rider.reg_event.birthday|date:"Y"}}</td>
<td align="center">{{rider.get_time_diff }}</td>
<td align="center">{{rider.reg_event.sex}}</td>
</tr>
{% endfor %}
</tbody>  
</table>	


{#<h2 id="event_cat2" class="cat_showhide" style="background-color: blue;">Категорія 30-39 років <<Показати>></h2>#}
<h2>
<button type="button" style="background-color: blue; width:100%" id="event_cat2" class="cat_showhide">
  Категорія 30-39 років <<Показати>> <span class="badge badge-light">{{ cat2.count }} учасників</span>
</button>
</h2> 
 
<table id="table_cat2" class="display" cellspacing="0" width="100%">
<thead>
<tr>
<th>№</th>
<th>Імя / Прізвище</th>
<th>Нік</th>
<th title="Стать">C</th>
<th>Місто</th>
<th>Команда</th>
<th>Рік народження</th>
<th>Загальний час</th>
<th>Стать</th>
</tr>
</thead>
<tbody>
{% for rider in cat2 %}
{% if rider.reg_event.status == True and rider.reg_event.pay > 0 %}
<tr style="color: green; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay > 0 %}
<tr style="color: black; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay == 0 %}
<tr style="color: grey">
{% endif %}
<td>{{forloop.counter}}</td>
<td>{{rider.reg_event.fname}} {{rider.reg_event.lname}}</td>
<td>{{rider.reg_event.nickname}}</td>
<td align="center">
{% if rider.reg_event.sex == 1 %}
	<img src="/media/images/male-icon_35.png" height="20" alt="Чоловік" title="Чоловік"></img>
{% else %}
	<img src="/media/images/female-icon_35.png" height="20" alt="Жінка" title="Жінка"></img>
{% endif %}
</td>
<td>{{rider.reg_event.city}}</td>
<td>{{rider.reg_event.club}}</td>
<td align="center">{{rider.reg_event.birthday|date:"Y"}}</td>
<td align="center">{{rider.get_time_diff }}</td>
<td align="center">{{rider.reg_event.sex}}</td>
</tr>
{% endfor %}
</tbody>  
</table>	


<h2>
<button type="button" style="background-color: green; width:100%" id="event_cat3" class="cat_showhide">
  Категорія 40-49 років <<Показати>> <span class="badge badge-light">{{ cat3.count }} учасників</span>
</button>
</h2> 
 
<table id="table_cat3" class="display" cellspacing="0" width="100%">
<thead>
<tr>
<th>№</th>
<th>Імя / Прізвище</th>
<th>Нік</th>
<th title="Стать">C</th>
<th>Місто</th>
<th>Команда</th>
<th>Рік народження</th>
<th>Загальний час</th>
<th>Стать</th>
</tr>
</thead>
<tbody>
{% for rider in cat3 %}
{% if rider.reg_event.status == True and rider.reg_event.pay > 0 %}
<tr style="color: green; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay > 0 %}
<tr style="color: black; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay == 0 %}
<tr style="color: grey">
{% endif %}
<td>{{forloop.counter}}</td>
<td>{{rider.reg_event.fname}} {{rider.reg_event.lname}}</td>
<td>{{rider.reg_event.nickname}}</td>
<td align="center" data-order="{{rider.reg_event.sex}}">
{% if rider.reg_event.sex == 1 %}
	<img src="/media/images/male-icon_35.png" height="20" alt="Чоловік" title="Чоловік"></img>
{% else %}
	<img src="/media/images/female-icon_35.png" height="20" alt="Жінка" title="Жінка"></img>
{% endif %}
</td>
<td>{{rider.reg_event.city}}</td>
<td>{{rider.reg_event.club}}</td>
<td align="center">{{rider.reg_event.birthday|date:"Y"}}</td>
<td align="center">{{rider.get_time_diff }}</td>
<td align="center">{{rider.reg_event.sex}}</td>
</tr>
{% endfor %}
</tbody>  
</table>	


{#<h2 id="event_cat4" class="cat_showhide" style="background-color: red;">Категорія 50-59 років <<Показати>>#}
<h2>
<button type="button" style="background-color: red; width:100%" id="event_cat4" class="cat_showhide">
  Категорія 50-59 років <<Показати>> <span class="badge badge-light">{{ cat4.count }} учасників</span>
</button>
</h2> 
<table id="table_cat4" class="display" cellspacing="0" width="100%">
<thead>
<tr>
<th>№</th>
<th>Імя / Прізвище</th>
<th>Нік</th>
<th title="Стать">C</th>
<th>Місто</th>
<th>Команда</th>
<th>Рік народження</th>
<th>Загальний час</th>
<th>Стать</th>
</tr>
</thead>
<tbody>
{% for rider in cat4 %}
{% if rider.reg_event.status == True and rider.reg_event.pay > 0 %}
<tr style="color: green; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay > 0 %}
<tr style="color: black; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay == 0 %}
<tr style="color: grey">
{% endif %}
<td>{{forloop.counter}}</td>
<td>{{rider.reg_event.fname}} {{rider.reg_event.lname}}</td>
<td>{{rider.reg_event.nickname}}</td>
<td align="center">
{% if rider.reg_event.sex == 1 %}
	<img src="/media/images/male-icon_35.png" height="20" alt="Чоловік" title="Чоловік"></img>
{% else %}
	<img src="/media/images/female-icon_35.png" height="20" alt="Жінка" title="Жінка"></img>
{% endif %}
</td>
<td>{{rider.reg_event.city}}</td>
<td>{{rider.reg_event.club}}</td>
<td align="center">{{rider.reg_event.birthday|date:"Y"}}</td>
<td align="center">{{rider.get_time_diff }}</td>
<td align="center">{{rider.reg_event.sex}}</td>
</tr>
{% endfor %}
</tbody>  
</table>	


<h2>
<button type="button" style="background-color: red; width:100%" id="event_cat5" class="cat_showhide">
  Категорія 60-69 років <<Показати>> <span class="badge badge-light">{{ cat5.count }} учасників</span>
</button>
</h2> 
<table id="table_cat5" class="display" cellspacing="0" width="100%">
<thead>
<tr>
<th>№</th>
<th>Імя / Прізвище</th>
<th>Нік</th>
<th title="Стать">C</th>
<th>Місто</th>
<th>Команда</th>
<th>Рік народження</th>
<th>Загальний час</th>
<th>Стать</th>
</tr>
</thead>
<tbody>
{% for rider in cat5 %}
{% if rider.reg_event.status == True and rider.reg_event.pay > 0 %}
<tr style="color: green; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay > 0 %}
<tr style="color: black; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay == 0 %}
<tr style="color: grey">
{% endif %}
<td>{{forloop.counter}}</td>
<td>{{rider.reg_event.fname}} {{rider.reg_event.lname}}</td>
<td>{{rider.reg_event.nickname}}</td>
<td align="center">
{% if rider.reg_event.sex == 1 %}
	<img src="/media/images/male-icon_35.png" height="20" alt="Чоловік" title="Чоловік"></img>
{% else %}
	<img src="/media/images/female-icon_35.png" height="20" alt="Жінка" title="Жінка"></img>
{% endif %}
</td>
<td>{{rider.reg_event.city}}</td>
<td>{{rider.reg_event.club}}</td>
<td align="center">{{rider.reg_event.birthday|date:"Y"}}</td>
<td align="center">{{rider.get_time_diff }}</td>
<td align="center">{{rider.reg_event.sex}}</td>
</tr>
{% endfor %}
</tbody>  
</table>	


<h2> {# id="event_cat6" class="cat_showhide">Категорія 70+ років <<Показати>></h2> #}
<button type="button" id="event_cat6" class="cat_showhide" style="width:100%;">
  Категорія 70+ років <<Показати>> <span class="badge badge-light">{{ cat6.count }} учасників</span>
</button>
</h2>
 
<table id="table_cat6" class="display" cellspacing="0" width="100%">
<thead>
<tr>
<th>№</th>
<th>Імя / Прізвище</th>
<th>Нік</th>
<th title="Стать">C</th>
<th>Місто</th>
<th>Команда</th>
<th>Рік народження</th>
<th>Загальний час</th>
<th>Стать</th>
</tr>
</thead>
<tbody>
{% for rider in cat6 %}
{% if rider.reg_event.status == True and rider.reg_event.pay > 0 %}
<tr style="color: green; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay > 0 %}
<tr style="color: black; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay == 0 %}
<tr style="color: grey">
{% endif %}
<td>{{forloop.counter}}</td>
<td>{{rider.reg_event.fname}} {{rider.reg_event.lname}}</td>
<td>{{rider.reg_event.nickname}}</td>
<td align="center" data-order="{{rider.reg_event.sex}}">
{% if rider.reg_event.sex == 1 %}
	<img src="/media/images/male-icon_35.png" height="20" alt="Чоловік" title="Чоловік"></img>
{% else %}
	<img src="/media/images/female-icon_35.png" height="20" alt="Жінка" title="Жінка"></img>
{% endif %}
</td>
<td>{{rider.reg_event.city}}</td>
<td>{{rider.reg_event.club}}</td>
<td align="center">{{rider.reg_event.birthday|date:"Y"}}</td>
<td align="center">{{rider.get_time_diff }}</td>
<td align="center">{{rider.reg_event.sex}}</td>
</tr>
{% endfor %}
</tbody>  
</table>	

{% else %}

<br>

<h2>
<button type="button" style="background-color: white; width:100%" id="event_cat0" class="cat_showhide">
  Категорія до 18 років <<Показати>> <span class="badge badge-light">{{ cat0.count }} учасників</span>
</button>
</h2> 
 
<table id="table_cat0" class="display" cellspacing="0" width="100%">
<thead>
<tr>
<th>№</th>
<th>Імя / Прізвище</th>
<th>Нік</th>
<th title="Стать">C</th>
<th>Місто</th>
<th>Команда</th>
<th>Рік народження</th>
<th>Загальний час</th>
<th>Стать</th>
</tr>
</thead>
<tbody>
{% for rider in cat0 %}
{% if rider.reg_event.status == True and rider.reg_event.pay > 0 %}
<tr style="color: green; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay > 0 %}
<tr style="color: black; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay == 0 %}
<tr style="color: grey">
{% endif %}
<td>{{forloop.counter}}</td>
<td>{{rider.reg_event.fname}} {{rider.reg_event.lname}}</td>
<td>{{rider.reg_event.nickname}}</td>
<td align="center">
{% if rider.reg_event.sex == 1 %}
	<img src="/media/images/male-icon_35.png" height="20" alt="Чоловік" title="Чоловік"></img>
{% else %}
	<img src="/media/images/female-icon_35.png" height="20" alt="Жінка" title="Жінка"></img>
{% endif %}
</td>
<td>{{rider.reg_event.city}}</td>
<td>{{rider.reg_event.club}}</td>
<td align="center">{{rider.reg_event.birthday|date:"Y"}}</td>
<td align="center">{{rider.get_time_diff }}</td>
<td align="center">{{rider.reg_event.sex }}</td>
</tr>
{% endfor %}
</tbody>  
</table>	


{#<h2 id="event_cat1" class="cat_showhide" style="background-color: yellow; ">Категорія 18-29 років <<Показати>></h2>#}
<h2>
<button type="button" style="background-color: yellow; width:100%" id="event_cat1" class="cat_showhide">
  Категорія 18-29 років <<Показати>> <span class="badge badge-light">{{ cat1.count }} учасників</span>
</button>
</h2>
  
<table id="table_cat1" class="display" cellspacing="0" width="100%">
<thead>
<tr>
<th>№</th>
<th>Імя / Прізвище</th>
<th>Нік</th>
<th title="Стать">C</th>
<th>Місто</th>
<th>Команда</th>
<th>Рік народження</th>
<th>Загальний час</th>
<th>Стать</th>
</tr>
</thead>
<tbody>
{% for rider in cat1 %}
{% if rider.reg_event.status == True and rider.reg_event.pay > 0 %}
<tr style="color: green; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay > 0 %}
<tr style="color: black; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay == 0 %}
<tr style="color: grey">
{% endif %}
<td>{{forloop.counter}}</td>
<td>{{rider.reg_event.fname}} {{rider.reg_event.lname}}</td>
<td>{{rider.reg_event.nickname}}</td>
<td align="center">
{% if rider.reg_event.sex == 1 %}
	<img src="/media/images/male-icon_35.png" height="20" alt="Чоловік" title="Чоловік"></img>
{% else %}
	<img src="/media/images/female-icon_35.png" height="20" alt="Жінка" title="Жінка"></img>
{% endif %}
</td>
<td>{{rider.reg_event.city}}</td>
<td>{{rider.reg_event.club}}</td>
<td align="center">{{rider.reg_event.birthday|date:"Y"}}</td>
<td align="center">{{rider.get_time_diff }}</td>
<td align="center">{{rider.reg_event.sex}}</td>
</tr>
{% endfor %}
</tbody>  
</table>	


{#<h2 id="event_cat2" class="cat_showhide" style="background-color: blue;">Категорія 30-39 років <<Показати>></h2>#}
<h2>
<button type="button" style="background-color: blue; width:100%" id="event_cat2" class="cat_showhide">
  Категорія 30-39 років <<Показати>> <span class="badge badge-light">{{ cat2.count }} учасників</span>
</button>
</h2> 
 
<table id="table_cat2" class="display" cellspacing="0" width="100%">
<thead>
<tr>
<th>№</th>
<th>Імя / Прізвище</th>
<th>Нік</th>
<th title="Стать">C</th>
<th>Місто</th>
<th>Команда</th>
<th>Рік народження</th>
<th>Загальний час</th>
<th>Стать</th>
</tr>
</thead>
<tbody>
{% for rider in cat2 %}
{% if rider.reg_event.status == True and rider.reg_event.pay > 0 %}
<tr style="color: green; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay > 0 %}
<tr style="color: black; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay == 0 %}
<tr style="color: grey">
{% endif %}
<td>{{forloop.counter}}</td>
<td>{{rider.reg_event.fname}} {{rider.reg_event.lname}}</td>
<td>{{rider.reg_event.nickname}}</td>
<td align="center">
{% if rider.reg_event.sex == 1 %}
	<img src="/media/images/male-icon_35.png" height="20" alt="Чоловік" title="Чоловік"></img>
{% else %}
	<img src="/media/images/female-icon_35.png" height="20" alt="Жінка" title="Жінка"></img>
{% endif %}
</td>
<td>{{rider.reg_event.city}}</td>
<td>{{rider.reg_event.club}}</td>
<td align="center">{{rider.reg_event.birthday|date:"Y"}}</td>
<td align="center">{{rider.get_time_diff }}</td>
<td align="center">{{rider.reg_event.sex}}</td>
</tr>
{% endfor %}
</tbody>  
</table>	


{# <h2 id="event_cat3" class="cat_showhide" style="background-color: green;">Категорія 40-49 років <<Показати>></h2> #}
<h2>
<button type="button" style="background-color: green; width:100%" id="event_cat3" class="cat_showhide">
  Категорія 40-49 років <<Показати>> <span class="badge badge-light">{{ cat3.count }} учасників</span>
</button>
</h2> 
 
<table id="table_cat3" class="display" cellspacing="0" width="100%">
<thead>
<tr>
<th>№</th>
<th>Імя / Прізвище</th>
<th>Нік</th>
<th title="Стать">C</th>
<th>Місто</th>
<th>Команда</th>
<th>Рік народження</th>
<th>Загальний час</th>
<th>Стать</th>
</tr>
</thead>
<tbody>
{% for rider in cat3 %}
{% if rider.reg_event.status == True and rider.reg_event.pay > 0 %}
<tr style="color: green; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay > 0 %}
<tr style="color: black; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay == 0 %}
<tr style="color: grey">
{% endif %}
<td>{{forloop.counter}}</td>
<td>{{rider.reg_event.fname}} {{rider.reg_event.lname}}</td>
<td>{{rider.reg_event.nickname}}</td>
<td align="center" data-order="{{rider.reg_event.sex}}">
{% if rider.reg_event.sex == 1 %}
	<img src="/media/images/male-icon_35.png" height="20" alt="Чоловік" title="Чоловік"></img>
{% else %}
	<img src="/media/images/female-icon_35.png" height="20" alt="Жінка" title="Жінка"></img>
{% endif %}
</td>
<td>{{rider.reg_event.city}}</td>
<td>{{rider.reg_event.club}}</td>
<td align="center">{{rider.reg_event.birthday|date:"Y"}}</td>
<td align="center">{{rider.get_time_diff }}</td>
<td align="center">{{rider.reg_event.sex}}</td>
</tr>
{% endfor %}
</tbody>  
</table>	


{#<h2 id="event_cat4" class="cat_showhide" style="background-color: red;">Категорія 50-59 років <<Показати>>#}
<h2>
<button type="button" style="background-color: red; width:100%" id="event_cat4" class="cat_showhide">
  Категорія 50-59 років <<Показати>> <span class="badge badge-light">{{ cat4.count }} учасників</span>
</button>
</h2> 
<table id="table_cat4" class="display" cellspacing="0" width="100%">
<thead>
<tr>
<th>№</th>
<th>Імя / Прізвище</th>
<th>Нік</th>
<th title="Стать">C</th>
<th>Місто</th>
<th>Команда</th>
<th>Рік народження</th>
<th>Загальний час</th>
<th>Стать</th>
</tr>
</thead>
<tbody>
{% for rider in cat4 %}
{% if rider.reg_event.status == True and rider.reg_event.pay > 0 %}
<tr style="color: green; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay > 0 %}
<tr style="color: black; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay == 0 %}
<tr style="color: grey">
{% endif %}
<td>{{forloop.counter}}</td>
<td>{{rider.reg_event.fname}} {{rider.reg_event.lname}}</td>
<td>{{rider.reg_event.nickname}}</td>
<td align="center">
{% if rider.reg_event.sex == 1 %}
	<img src="/media/images/male-icon_35.png" height="20" alt="Чоловік" title="Чоловік"></img>
{% else %}
	<img src="/media/images/female-icon_35.png" height="20" alt="Жінка" title="Жінка"></img>
{% endif %}
</td>
<td>{{rider.reg_event.city}}</td>
<td>{{rider.reg_event.club}}</td>
<td align="center">{{rider.reg_event.birthday|date:"Y"}}</td>
<td align="center">{{rider.get_time_diff }}</td>
<td align="center">{{rider.reg_event.sex}}</td>
</tr>
{% endfor %}
</tbody>  
</table>	

<h2> {# id="event_cat5" class="cat_showhide">Категорія 60+ років <<Показати>></h2> #}
<button type="button" id="event_cat5" class="cat_showhide" style="width:100%;">
  Категорія 60+ років <<Показати>> <span class="badge badge-light">{{ cat5.count }} учасників</span>
</button>
</h2>
 
<table id="table_cat5" class="display" cellspacing="0" width="100%">
<thead>
<tr>
<th>№</th>
<th>Імя / Прізвище</th>
<th>Нік</th>
<th title="Стать">C</th>
<th>Місто</th>
<th>Команда</th>
<th>Рік народження</th>
<th>Загальний час</th>
<th>Стать</th>
</tr>
</thead>
<tbody>
{% for rider in cat5 %}
{% if rider.reg_event.status == True and rider.reg_event.pay > 0 %}
<tr style="color: green; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay > 0 %}
<tr style="color: black; font-weight:bold;">
{% endif %}
{% if rider.reg_event.status == False and rider.reg_event.pay == 0 %}
<tr style="color: grey">
{% endif %}
<td>{{forloop.counter}}</td>
<td>{{rider.reg_event.fname}} {{rider.reg_event.lname}}</td>
<td>{{rider.reg_event.nickname}}</td>
<td align="center" data-order="{{rider.reg_event.sex}}">
{% if rider.reg_event.sex == 1 %}
	<img src="/media/images/male-icon_35.png" height="20" alt="Чоловік" title="Чоловік"></img>
{% else %}
	<img src="/media/images/female-icon_35.png" height="20" alt="Жінка" title="Жінка"></img>
{% endif %}
</td>
<td>{{rider.reg_event.city}}</td>
<td>{{rider.reg_event.club}}</td>
<td align="center">{{rider.reg_event.birthday|date:"Y"}}</td>
<td align="center">{{rider.get_time_diff }}</td>
<td align="center">{{rider.reg_event.sex}}</td>
</tr>
{% endfor %}
</tbody>  
</table>	

{% endif %}


{% endblock %}

	