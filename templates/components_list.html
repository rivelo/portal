<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
{% if status_brand %}
<title>Виробник {{components_list.0.manufacturer}}</title>
{% endif %}
{% if status_type %}
<title>{{components_list.0.type}}</title>
{% endif %}
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<script>
$(function () {

	$('[data-toggle="tooltip"]').tooltip()
		
})

$(document).ready(function() {
	$("#filters").hide();
	
    $("#hideall").click(function() 
    	{
    		$("div[ctype]").hide() 
    		$("#cm_filters .badge-success").hide();
    		$("#cm_filters .badge-info").hide();
    	});

    //$(".dropdown-menu a").click(function () 
    $("#menu_company a").click(function ()
    	{
        	console.log("DropDown menu click!!!" + $(this).attr("mid") )
        	$("div[mid='"+$(this).attr("mid")+"']").show();
        	$("#cm_filters .badge-success[mid="+$(this).attr("mid")+"]").show();
    	})

    $("#menu_type a").click(function () 
        {
           	console.log("DropDown menu click!!!" + $(this).attr("tid") )
//                		$('#menu-company').find(":selected").text();
           	$("div[ctype='"+$(this).attr("tid")+"']").show();
           	$("#cm_filters .badge-info[tid="+$(this).attr("tid")+"]").show();
        })
        
    $("#cm_filters .badge-success").click(function () {
    	
    	$("div[mid='"+$(this).attr("mid")+"']").hide();
    	$(this).hide();
    })

    $("#cm_filters .badge-info").click(function () {
    	console.log("Print - "+ $(this).attr("tid"));
    	$("div[ctype='"+$(this).attr("tid")+"']").hide();
    	$(this).hide();
    })

    $("#filter_show" ).click(function() {
    	$("#filters").toggle();
    	});    

    
});
    
</script>


<style>
#filter_show:hover { 
 	cursor: pointer;
 	cursor: hand; 
}

.image-component {
	position	: relative;
	width		: 100%; /* for IE 6 */
}

h5.sale {
	color: white;
	background-color: red;
	font-weight: bold;
	position	: absolute; 
/*	float: right;*/
	bottom		: 0px;
	right		: 0px;
/*	left		: 100px; */
/*	width		: 50%; */
    padding-left: 5px;
    padding-right: 5px;
    margin-right: 3px;

}


h5.sale_discount {
	color: white;
	background-color: red;
	font-weight: bold;
	position	: absolute; 
/*	float: right;*/
	bottom		: 25px;
	right		: 0px;
/*	left		: 100px; */
/*	width		: 50%; */
    padding-left: 5px;
    padding-right: 5px;
    margin-right: 3px;

}


h5.discount {
	color: white;
	background-color: black;
	font-weight: bold;
	position	: absolute; 
/*	float: right;*/
	bottom		: 0px;
	right		: 0px;
/*	left		: 100px; */
/*	width		: 50%; */
}

.item_photo_1{
	max-height: 200px;
	width: 200px;
}  

.item_photo {
    height: auto; 
    width: auto; 
    max-width: 200px; 
    max-height: 200px;
    margin-left: auto;
    margin-right: auto;
    border: none;
/*    background: none;
    cursor: pointer; */
} 

.badge-myinfo {
  background-color: black;
  color: white;
}
.badge-myinfo:hover {
  background-color: red;
}
        
@media (max-width: 368px) {        
.c_item {        
	width: 100%;
	height: 330px; 
	padding: 5px 5px 5px 5px; 
	margin: 10px 10px 0px 0px;
	background: #ddf2c6;
}
}
        
@media (min-width:368px) {
	.c_item {
		background:#ddf2c6; 
		width: 100%; 
		height: 330px; 
		padding: 5px 5px 5px 5px; 
		margin: 10px 10px 0px 0px;
    }
  }

  @media (min-width:568px) {
      .c_item {
		background: #ddf2c6;
		width: 200px;      
      }
      
  }

  
  @media (min-width:768px) {
      .c_item {
        	background: #ddf2c6;
      }
      
  }
  
  @media (min-width:992px) {
      .c_item {
        	background: #ddf2c6;
      }
  }
  
  @media (min-width:1200px) {
      .c_item {
        	background: #ddf2c6;
      }
  }
        
    </style>

{% load poll_extras %}

{% block content %}


<div class= "row" style="height:auto">
{% if status_brand %}
<img class="ml-3" src="/media/{{components_list.0.manufacturer.logo}}" style="height:64px">
<div class="col-auto my-auto">
<h1 class="h-100 my-auto" >
<span class="badge badge-secondary my-auto">Виробник - {{components_list.0.manufacturer}}</span>
<span class="badge badge-success ml-1" data-toggle="tooltip" data-placement="top" title="Фільтри (показати/приховати)" id="filter_show" ><span class="material-icons">filter_alt</span></span>
<span class="badge badge-danger">{{components_list.0.manufacturer.get_discount.1}}</span>
</h1>
</div>
{% endif %}
{% if status_type %}
<img class="ml-3" src="{{components_list.0.type.get_icon_name}}" style="width:64px; height:64px"> 
<div class="col-auto my-auto">
<h1 class="h-100 my-auto" >
 <span class="badge badge-secondary my-auto">{{components_list.0.type}}</span>
 <span class="badge badge-success ml-1" data-toggle="tooltip" data-placement="top" title="Фільтри (показати/приховати)" id="filter_show" ><span class="material-icons">filter_alt</span></span>
</h1>
<span class="badge badge-danger">{{components_list.0.type.get_discount.0}}</span>
</div>
{% endif %} 

     
     

{% if search_str %}
<div class="col-auto my-auto">
<h2>За вашим запитом <span class="badge badge-info"> {{search_str}}</span> <br> Знайдено:</h2>
</div>
{% endif %}

</div>

{# Filters #}
<div class="container-fluid mt-1" id="filters">
<div class="row">
<div class="col">

<div class="dropdown show">
<div class="btn-group" role="group" aria-label="Button group with nested dropdown">
<button type="button" class="btn btn-danger" id="hideall" data-toggle="tooltip" data-placement="top" title="Приховати всі товари">Сховати всі</button>
</div>

{% if status_type %}
  <a class="btn btn-success dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Виберіть виробника для показу товарів">
    Виробники
  </a>

  <div class="dropdown-menu" aria-labelledby="dropdownMenuLink" id="menu_company">
{% for company in companys %}  
    <a class="dropdown-item" href="#" mid="{{company.manufacturer__id}}">{{company.manufacturer__name}} <span class="badge badge-light">{{company.brand_c}}</span></a>
{% endfor %}
  </div>
{% endif %}  

{% if status_brand %}
<div class="btn-group dropright">
  <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Виберіть категорію для відображення товарів в ній">
    Категорії
  </button>
  <div class="dropdown-menu" id="menu_type">
{% for type in types %} 
    <a class="dropdown-item" href="#" tid="{{type.type__id}}">{{type.type__name}} <span class="badge badge-light">{{type.type_c}}</span></a>
{% endfor %}
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="#" id="filter_off">Скинути фільтри</a>
  </div>
</div>  
{% endif %}  
  
</div>
</div> 
 
<div class="col" id="cm_filters" data-toggle="tooltip" data-placement="top" title="Натисніть на категорію чи виробника щоб приховати товар">
{% for company in companys %}  
    <span class="badge badge-success" mid="{{company.manufacturer__id}}">{{company.manufacturer__name}} <span class="badge badge-light">{{company.brand_c}}</span> </span>
{% endfor %}
{% for type in types %} 
    <span class="badge badge-info" tid="{{type.type__id}}">{{type.type__name}} <span class="badge badge-light">{{type.type_c}}</span> </span>
{% endfor %}
</div>
  
</div>  
</div>
 



{#<div class="row post ml-1">#}
<div class="row post d-flex align-content-around flex-wrap m-1 mt-4">
 
{% for component in components_list %}
{#	<div style="float:left;background:#ddf2c6; width:200px; height:330px; margin: 10px 10px 0px 0px; padding: 5px 5px 5px 5px;"> #}
	<div class="c_item mb-1 mr-auto" ctype="{{component.type.id}}" mid="{{component.manufacturer.id}}">
<div class="image-component">
	<div style="background-color: white; height:200px;">
	<a href="{% url 'component-show' component.id %}">
	<img src="
	{% if component.photo %}
	/media/{{component.photo}}
	{% elif component.photo_url.all %}
	{{ component.photo_url.all.0.local }}
	{% else %}
	{# component.photo_url.all.0.local #}
	{% endif %}
	" alt="{{component.name}} -> {{component.photo_url.all.0.local}}" class="item_photo" /></a>
	</div> 
	{% if component.sale %}
	<h5 class="sale">Знижка {{component.sale|floatformat:"0"}} %</h5>
	{% else %}
	{% if component.get_discount.0 %}
		<h5 class="sale_discount">Знижка {{component.get_discount.1|floatformat:"0"}} %</h5>
{#		<h5 class="discount"><span class="badge badge-myinfo"> {{component.get_discount_item.name}}: {{component.get_discount|floatformat:"0"}} грн. </span></h5> #}
		<h5 class="discount"><span class="badge badge-myinfo"> <font size="1" color="white"> {{component.get_discount.2}}: </font> {{component.get_discount.0|floatformat:"0"}} грн. </span></h5>
	{% endif %}
	{% endif %}
</div>	
	<p style="font-size: 99%"> 
	<a href="{% url 'component-show' component.id %}" title="{{component.name}}" data-toggle="tooltip" data-placement="top"> [{{component.ids}}] {{component.name|slice:"40"}} </a><br>
{% if status_type %}
	Виробник: <a href="{% url 'components-list-bybrand'  component.manufacturer.id %}"> {{component.manufacturer.name}} </a>
{% endif %}	
{% if status_brand %}
	Тип: <a href="{% url 'components-list-bytype'  component.type.id %}"> {{component.type.name_ukr}} </a>
{% endif %}	
	<br>
{% if component.sale > 0 %}	
	Ціна: <s>{{component.price|floatformat:"0"}} </s> <b>{{component.get_saleprice|floatformat:"0"}} грн. </b>
{% else %}
	Ціна: <b> {{component.price}} грн. </b>
{% endif %}	
	</p>
	</div>

{% endfor %}	


</div> {# Row end #}


<br>


{% endblock %}



